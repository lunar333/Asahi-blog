name: publish site

on: 
  push: 
    branches:
      - main
  pull_request: 
    branches:
      - main

jobs: 
  deploy:
    runs-on: ubuntu-latest # 创建一个新的云端虚拟机 使用最新Ubuntu系统
    steps:
      - uses: actions/checkout@v2 # 先checkout到main分支
      - uses: actions/setup-python@v2 # 安装Python3和相关环境
        with:
          python-version: 3.x
      - run: pip install mkdocs-material # 使用pip包管理工具安装mkdocs-material
      - run: |
          mkdocs build # 构建站点
          cp CNAME site/ # 将根目录下的 CNAME 文件复制到 site/ 目录
      - run: mkdocs gh-deploy --force # 使用mkdocs-material部署到gh-pages分支